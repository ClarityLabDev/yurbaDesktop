<html>

<head>
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/topbar.css" />

    <script defer src="assets/js/renderer.js"></script>
    <meta charset="UTF-8" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
</head>
<style>
    body {
        font-family: 'Inter'
    }

    webview {
        overflow: hidden;
    }
</style>

<body>
    <div class="titlebar">
        <div class="navigator">
            <div class="titlebar-button unactive" onclick="webview.goBack()" id="go-back">
                <img src="assets/media/arrow-back.svg">
            </div>
            <div class="titlebar-button" onclick="webview.reload()">
                <img src="assets/media/reload.svg">
            </div>
            <div class="titlebar-button unactive" onclick="webview.goForward()" id="go-forward">
                <img src="assets/media/arrow-forward.svg">
            </div>
            <div class="titlebar-button secondary" onclick="webview.src='https://desktop.yurba.one/'">
                <img src="assets/media/home.svg">
            </div>
        </div>
        <div class="title">
            <p class="name" id="yurba-app-name">Yurba</p>
            <p class="secondary" id="yurba-page-title"></p>
        </div>
        <div class="buttons">
            <div class="titlebar-button secondary"
                onclick="window.electron.openInBrowser('https://support.yurba.one');">
                <img src="assets/media/help.svg">
            </div>
            <div class="titlebar-button" id="minimize" onclick="electron.minimize()">
                <img src="assets/media/minimize.svg">
            </div>
            <div class="titlebar-button" id="maximize" onclick="electron.maximize()">
                <img src="assets/media/maximize.svg">
            </div>
            <div class="titlebar-button" id="close" onclick="electron.close()">
                <img src="assets/media/close.svg">
            </div>
        </div>
        <div class="indicator visually-hidden"></div>
    </div>

    <webview autosize="off" src="https://desktop.yurba.one" id="webview" preload="./src/titlebar.js"
        nodeintegration="true" webpreferences="contextIsolation=false">
    </webview>

</body>

</html>
<script>
    const webview = document.querySelector('webview')
    const indicator = document.querySelector('.indicator')

    // debugger

    // webview.addEventListener('dom-ready', () => {
    //   webview.openDevTools()
    // })


    const loadstart = () => {
        indicator.classList.remove("visually-hidden")
    }

    const loadstop = () => {
        indicator.classList.add("visually-hidden")
    }

    webview.addEventListener('did-start-loading', loadstart)
    webview.addEventListener('did-stop-loading', loadstop)
</script>